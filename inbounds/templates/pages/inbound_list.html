{% extends "layouts/base.html" %}
{% load i18n static %}

{% block title %} Inbounds {% endblock title %}

{% block overlay %}
  <div class="min-height-300 bg-primary position-absolute w-100"></div>
{% endblock overlay %}

{% block content %}
<div class="container-fluid py-4">
    <a href="/admin/inbounds/inbound/add/" class="btn btn-sm btn-outline-gray-600 btn-success">
        <i class="fa fa-plus-circle"></i>
        Add inbound
    </a>

    <div class="row">
        <div class="col-12">
            <div class="card mb-4">
                <div class="card-header pb-0">
                    <h6>Inbounds table</h6>
                </div>
                <div class="card-body px-0 pt-0 pb-2">
                    <div class="card-header">
                        <div class="row ps-3">
                            <div class="col-2 text-uppercase text-secondary text-center text-xxs font-weight-bolder opacity-7">Tag</div>
                            <div class="col-4 text-uppercase text-secondary text-center text-xxs font-weight-bolder opacity-7">Traffic used</div>
                            <div class="col-2 text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Status</div>
                            <div class="col-2 text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Expiration</div>
                            <div class="col-2 text-secondary opacity-7"></div>
                        </div>
                    </div>
                    <div class="card-body">

                        {% for inbound in inbound_list %}
                        <div class="row ps-3 align-items-center">
                            <div class="col-2 text-center">
                                <div class="d-flex px-2 py-1 align-items-center">
                                    <div>
                                        <button type="button" class="btn btn-transparent p-0 opacity-10 me-3 mt-2" data-toggle="collapse" data-target="#users-{{ inbound.id }}" aria-expanded="false" aria-controls="users-{{ inbound.id }}">
                                            <i class="ni ni-fat-add text-primary text-lg"></i>
                                        </button>
                                    </div>
                                    <div class="d-flex flex-column justify-content-center">
                                        <h6 class="mb-0 text-sm">{{ inbound.tag }}</h6>
                                    </div>
                                </div>
                            </div>

                            {% if inbound.traffic %}
                            <div class="col-4 align-middle text-center">
                                <div class="d-flex align-items-center">
                                    <span class="me-2 text-xs font-weight-bold">60%</span>
                                    <div>
                                        <div class="progress">
                                            <div class="progress-bar bg-gradient-info" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% else %}
                            <div class="col-4 align-middle text-center">
                                <div class="d-flex align-items-center justify-content-center">
                                    <span class="text-secondary text-center text-xs font-weight-bold">Unlimited</span>
                                </div>
                            </div>
                            {% endif %}

                            <div class="col-2 align-middle text-center text-sm">
                                {% if inbound.status == 0 %}
                                <span class="badge badge-sm bg-gradient-danger">Disabled</span>
                                {% elif inbound.status == 1 %}
                                <span class="badge badge-sm bg-gradient-success">Enabled</span>
                                {% elif inbound.status == 2 %}
                                <span class="badge badge-sm bg-gradient-danger">Expired</span>
                                {% else %}
                                <span class="badge badge-sm bg-gradient-warning">Depreted</span>
                                {% endif %}
                            </div>

                            <div class="col-2 align-middle text-center">
                                <span class="text-secondary text-xs font-weight-bold">{% if inbound.expiration_date %}{{ inbound.expiration_date }}{% else %}Unlimited{% endif %}</span>
                            </div>

                            <div class="col-2 align-middle">
                                <a href="/admin/inbounds/inbound/{{ inbound.id }}/change/" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                                    Edit
                                </a>
                            </div>

                        </div>

                        <div class="collapse" id="users-{{ inbound.id }}">
                            {% include 'includes/users_collapse.html' with users=inbound.users %}
                        </div>
                        {% endfor %}
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

{% endblock content %}

{% block scripts %}
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
{% endblock %}
